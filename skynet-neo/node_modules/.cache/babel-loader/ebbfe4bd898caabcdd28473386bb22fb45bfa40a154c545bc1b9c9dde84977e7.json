{"ast":null,"code":"import * as d3 from 'd3';\nconst COLOR_MAP = {\n  0: 'white',\n  // uncategorised node\n  1: 'white',\n  // host nodes\n  2: 'white',\n  // severity cluster\n  3: '#7f7f7f',\n  // name cluster node\n  4: '#7f7f7f',\n  // alert node\n  5: '#ffbaac',\n  // LOW    severity ALERT\n  6: '#ff9585',\n  // MEDIUM severity ALERT\n  7: '#ff584d' // HIGH   severity ALERT\n};\nfunction wrap() {\n  let self = d3.select(this),\n    textLength = self.node().getComputedTextLength(),\n    text = self.text();\n  while (textLength > 150 - 2 * 8 && text.length > 0) {\n    text = text.slice(0, -1);\n    self.text(text + '...');\n    textLength = self.node().getComputedTextLength();\n  }\n}\nfunction getDynamicLabel(node) {\n  var _ref, _node$name;\n  if (node.view === 2 && node.type === 'SEVERITY_CLUSTER') {\n    return `[${node.entity_type}] ${node.entity} (${node.severity})`;\n  }\n  return `${(_ref = (_node$name = node.name) !== null && _node$name !== void 0 ? _node$name : node.detection_type) !== null && _ref !== void 0 ? _ref : node.severity}${node.count ? `(${node.count})` : ''}`;\n}\nexport function runForceGraph(container, linksData, nodesData, strength, labelNodeTypes // list of nodetypes to attach a label to\n) {\n  const nodes = nodesData;\n  const hostNodes = nodesData.filter(node => node.type === 'ENTITY');\n  const alertNodes = nodesData.filter(node => node.type !== 'ENTITY').sort((nodeA, nodeB) => nodeA.count > nodeB.count);\n  const links = linksData;\n  const containerRect = container.getBoundingClientRect();\n  container.innerHTML = '';\n  let width = containerRect.width;\n  let height = containerRect.height;\n\n  // const drag = (simulation) => {\n  //   const dragstarted = (event, d) => {\n  //     if (!event.active) simulation.alphaTarget(0.3).restart();\n  //     d.fx = d.x;\n  //     d.fy = d.y;\n  //   };\n\n  //   const dragged = (event, d) => {\n  //     d.fx = event.x;\n  //     d.fy = event.y;\n  //   };\n\n  //   const dragended = (event, d) => {\n  //     if (!event.active) simulation.alphaTarget(0);\n  //     d.fx = null;\n  //     d.fy = null;\n  //   };\n\n  //   return d3\n  //     .drag()\n  //     .on('start', dragstarted)\n  //     .on('drag', dragged)\n  //     .on('end', dragended);\n  // };\n\n  // Add the tooltip element to the graph\n  const tooltip = document.querySelector('#graph-tooltip');\n  if (!tooltip) {\n    const tooltipDiv = document.createElement('div');\n    tooltipDiv.style.opacity = '0';\n    tooltipDiv.id = 'graph-tooltip';\n    document.body.appendChild(tooltipDiv);\n  }\n  const tooltipContainer = d3.select('#graph-tooltip');\n  const addTooltip = (hoverTooltip, d, x, y) => {\n    tooltipContainer.transition().duration(200).style('opacity', 0.9);\n    tooltipContainer.transition().duration(200).style('transform', 'scale(1)');\n    tooltipContainer.html(hoverTooltip(d)).style('background-color', 'black').style('left', `${x}px`).style('top', `${y - 28}px`);\n  };\n  const removeTooltip = () => {\n    tooltipContainer.transition().duration(200).style('opacity', 0);\n    tooltipContainer.transition().duration(200).style('transform', 'scale(0)');\n  };\n  const simulation = d3.forceSimulation(nodes).force('link', d3.forceLink(links).id(d => `${d.index}`)).force('charge', d3.forceManyBody().strength(strength))\n  // .force('center', d3.forceCenter(width / 2, height / 2))\n  .force('x', d3.forceX(width / 2)).force('y', d3.forceY(height / 2));\n  const svg = d3.select(container).append('svg').attr('height', '100%').attr('width', '100%').attr('viewBox', [0, 0, width, height]).attr('overflow', 'visible').call(d3.zoom().on('zoom', function (event) {\n    svg.attr('transform', event.transform);\n  }).translateExtent([[-400, -400], [width + 400, height + 400]]));\n  const link = svg.append('g').selectAll('line').data(links).enter().append('line').attr('stroke', '#999').attr('stroke-opacity', 0.6);\n  const node = svg.append('g').selectAll('circle').data(alertNodes).join('circle').attr('r', d => Math.sqrt(2) * Math.max(1, Math.log(isNaN(d.count) ? 1 : d.count * 20))).attr('fill', d => COLOR_MAP[d.group]).on('click', (event, d) => {\n    if (!labelNodeTypes.includes(d.type)) addTooltip(t => {\n      var _t$detection_type, _t$name;\n      return t.type.includes('CLUSTER') ? (_t$detection_type = t.detection_type) !== null && _t$detection_type !== void 0 ? _t$detection_type : t.severity : `${(_t$name = t.name) !== null && _t$name !== void 0 ? _t$name : t.detection_type} (${t.count})`;\n    }, d, event.pageX, event.pageY);\n  }).on('mouseout', () => {\n    removeTooltip();\n  });\n  // .call(drag(simulation));\n\n  const hostNode = svg.append('g').attr('stroke', '#ff9585').attr('stroke-width', 4).selectAll('rect').data(hostNodes).join('rect').attr('width', 16).attr('height', 16).attr('fill', d => COLOR_MAP[d.group]).on('dblclick', (event, d) => {\n    event.preventDefault();\n    console.log(d.entity);\n    window.location = `/view3/?entity=${d.entity}`;\n  });\n  const hostLabel = svg.append('g').attr('class', 'labels').selectAll('text').data(hostNodes.filter(d => labelNodeTypes.includes(d.type))) // hostnodes\n  .enter().append('text').text(d => `[${d.entity_type}]` + ' ' + d.entity.toUpperCase())\n  // .each(wrap) // this truncates the host label\n  .attr('stroke', '#000').attr('stroke-width', 1).attr('fill', '#ff9585').attr('font-size', '20').attr('font-weight', '900').attr('text-anchor', 'middle').attr('dominant-baseline', 'central');\n  const clusterLabel = svg.append('g').attr('class', 'labels').selectAll('text').data(alertNodes.filter(d => labelNodeTypes.includes(d.type))) // alert source\n  .enter().append('text').text(d => getDynamicLabel(d)).attr('stroke', '#616161').attr('stroke-width', 2).attr('fill', '#fff').attr('paint-order', 'stroke').attr('text-anchor', 'middle').attr('dominant-baseline', 'central');\n  simulation.on('tick', () => {\n    //update link positions\n    link.attr('x1', d => d.source.x).attr('y1', d => d.source.y).attr('x2', d => d.target.x).attr('y2', d => d.target.y);\n\n    // update node positions\n    node.attr('cx', d => d.x).attr('cy', d => d.y).transition().duration(2000);\n    hostNode.attr('x', d => d.x - 8).attr('y', d => d.y - 8);\n\n    // update label positions\n    hostLabel.attr('x', d => d.x).attr('y', d => d.y - 16);\n    clusterLabel.attr('x', d => d.x).attr('y', d => d.y - 10);\n  });\n  return {\n    destroy: () => {\n      simulation.stop();\n    },\n    nodes: () => {\n      return svg.node();\n    }\n  };\n}","map":{"version":3,"names":["d3","COLOR_MAP","wrap","self","select","textLength","node","getComputedTextLength","text","length","slice","getDynamicLabel","_ref","_node$name","view","type","entity_type","entity","severity","name","detection_type","count","runForceGraph","container","linksData","nodesData","strength","labelNodeTypes","nodes","hostNodes","filter","alertNodes","sort","nodeA","nodeB","links","containerRect","getBoundingClientRect","innerHTML","width","height","tooltip","document","querySelector","tooltipDiv","createElement","style","opacity","id","body","appendChild","tooltipContainer","addTooltip","hoverTooltip","d","x","y","transition","duration","html","removeTooltip","simulation","forceSimulation","force","forceLink","index","forceManyBody","forceX","forceY","svg","append","attr","call","zoom","on","event","transform","translateExtent","link","selectAll","data","enter","join","Math","sqrt","max","log","isNaN","group","includes","t","_t$detection_type","_t$name","pageX","pageY","hostNode","preventDefault","console","window","location","hostLabel","toUpperCase","clusterLabel","source","target","destroy","stop"],"sources":["/Users/anirudh/Documents/Cyberdyne Ventures/skynet-web/src/components/NetworkGraph/runForceGraph.js"],"sourcesContent":["import * as d3 from 'd3';\n\nconst COLOR_MAP = {\n  0: 'white',     // uncategorised node\n  1: 'white',     // host nodes\n  2: 'white',     // severity cluster\n  3: '#7f7f7f',   // name cluster node\n  4: '#7f7f7f',   // alert node\n  5: '#ffbaac',   // LOW    severity ALERT\n  6: '#ff9585',   // MEDIUM severity ALERT\n  7: '#ff584d',   // HIGH   severity ALERT\n};\n\nfunction wrap() {\n  let self = d3.select(this),\n    textLength = self.node().getComputedTextLength(),\n    text = self.text();\n  while (textLength > (150 - 2 * 8) && text.length > 0) {\n    text = text.slice(0, -1);\n    self.text(text + '...');\n    textLength = self.node().getComputedTextLength();\n  }\n}\n\nfunction getDynamicLabel(node) {\n  if (node.view === 2 && node.type === 'SEVERITY_CLUSTER') {\n    return `[${node.entity_type}] ${node.entity} (${node.severity})`\n  }\n  return `${node.name ?? node.detection_type ?? node.severity}${node.count ? `(${node.count})` : ''}`;\n}\n\nexport function runForceGraph(\n  container,\n  linksData,\n  nodesData,\n  strength,\n  labelNodeTypes, // list of nodetypes to attach a label to\n) {\n  const nodes = nodesData;\n  const hostNodes = nodesData.filter(node => node.type === 'ENTITY');\n  const alertNodes = nodesData\n    .filter(node => node.type !== 'ENTITY')\n    .sort((nodeA, nodeB) => nodeA.count > nodeB.count);\n\n  const links = linksData;\n\n  const containerRect = container.getBoundingClientRect();\n  container.innerHTML = '';\n  let width = containerRect.width;\n  let height = containerRect.height;\n\n  // const drag = (simulation) => {\n  //   const dragstarted = (event, d) => {\n  //     if (!event.active) simulation.alphaTarget(0.3).restart();\n  //     d.fx = d.x;\n  //     d.fy = d.y;\n  //   };\n\n  //   const dragged = (event, d) => {\n  //     d.fx = event.x;\n  //     d.fy = event.y;\n  //   };\n\n  //   const dragended = (event, d) => {\n  //     if (!event.active) simulation.alphaTarget(0);\n  //     d.fx = null;\n  //     d.fy = null;\n  //   };\n\n  //   return d3\n  //     .drag()\n  //     .on('start', dragstarted)\n  //     .on('drag', dragged)\n  //     .on('end', dragended);\n  // };\n\n  // Add the tooltip element to the graph\n  const tooltip = document.querySelector('#graph-tooltip');\n  if (!tooltip) {\n    const tooltipDiv = document.createElement('div');\n    tooltipDiv.style.opacity = '0';\n    tooltipDiv.id = 'graph-tooltip';\n    document.body.appendChild(tooltipDiv);\n  }\n  const tooltipContainer = d3.select('#graph-tooltip');\n\n  const addTooltip = (hoverTooltip, d, x, y) => {\n    tooltipContainer.transition().duration(200).style('opacity', 0.9);\n    tooltipContainer.transition().duration(200).style('transform', 'scale(1)');\n    tooltipContainer\n      .html(hoverTooltip(d))\n      .style('background-color', 'black')\n      .style('left', `${x}px`)\n      .style('top', `${y - 28}px`);\n  };\n\n  const removeTooltip = () => {\n    tooltipContainer.transition().duration(200).style('opacity', 0);\n    tooltipContainer.transition().duration(200).style('transform', 'scale(0)');\n  };\n\n  const simulation = d3\n    .forceSimulation(nodes)\n    .force(\n      'link',\n      d3.forceLink(links).id((d) => `${d.index}`),\n    )\n    .force('charge', d3.forceManyBody().strength(strength))\n    // .force('center', d3.forceCenter(width / 2, height / 2))\n    .force('x', d3.forceX(width / 2))\n    .force('y', d3.forceY(height / 2));\n\n  const svg = d3\n    .select(container)\n    .append('svg')\n    .attr('height', '100%')\n    .attr('width', '100%')\n    .attr('viewBox', [0, 0, width, height])\n    .attr('overflow', 'visible')\n    .call(\n      d3\n        .zoom()\n        .on('zoom', function (event) {\n          svg.attr('transform', event.transform);\n        })\n        .translateExtent([\n          [-400, -400],\n          [width + 400, height + 400],\n        ]),\n    );\n\n  const link = svg\n    .append('g')\n    .selectAll('line')\n    .data(links)\n    .enter()\n    .append('line')\n    .attr('stroke', '#999')\n    .attr('stroke-opacity', 0.6)\n\n  const node = svg\n    .append('g')\n    .selectAll('circle')\n    .data(alertNodes)\n    .join('circle')\n    .attr('r', (d) =>\n      Math.sqrt(2) *\n      Math.max(1, Math.log(isNaN(d.count) ? 1 : d.count * 20)),\n    )\n    .attr('fill', (d) => COLOR_MAP[d.group])\n    .on('click', (event, d) => {\n      if (!labelNodeTypes.includes(d.type))\n        addTooltip((t) => t.type.includes('CLUSTER') ? (t.detection_type ?? t.severity) : `${t.name ?? t.detection_type} (${t.count})`, d, event.pageX, event.pageY);\n    })\n    .on('mouseout', () => {\n      removeTooltip();\n    })\n  // .call(drag(simulation));\n\n  const hostNode = svg\n    .append('g')\n    .attr('stroke', '#ff9585')\n    .attr('stroke-width', 4)\n    .selectAll('rect')\n    .data(hostNodes)\n    .join('rect')\n    .attr('width', 16)\n    .attr('height', 16)\n    .attr('fill', (d) => COLOR_MAP[d.group])\n    .on('dblclick', (event, d) => {\n      event.preventDefault();\n      console.log(d.entity);\n      window.location = (`/view3/?entity=${d.entity}`)\n    });\n\n  const hostLabel = svg\n    .append('g')\n    .attr('class', 'labels')\n    .selectAll('text')\n    .data(hostNodes.filter(d => labelNodeTypes.includes(d.type))) // hostnodes\n    .enter()\n    .append('text')\n    .text((d) => `[${d.entity_type}]` + ' ' + d.entity.toUpperCase())\n    // .each(wrap) // this truncates the host label\n    .attr('stroke', '#000')\n    .attr('stroke-width', 1)\n    .attr('fill', '#ff9585')\n    .attr('font-size', '20')\n    .attr('font-weight', '900')\n    .attr('text-anchor', 'middle')\n    .attr('dominant-baseline', 'central')\n\n  const clusterLabel = svg.append('g')\n    .attr('class', 'labels')\n    .selectAll('text')\n    .data(alertNodes.filter(d => labelNodeTypes.includes(d.type))) // alert source\n    .enter()\n    .append('text')\n    .text((d) => getDynamicLabel(d))\n    .attr('stroke', '#616161')\n    .attr('stroke-width', 2)\n    .attr('fill', '#fff')\n    .attr('paint-order', 'stroke')\n    .attr('text-anchor', 'middle')\n    .attr('dominant-baseline', 'central')\n\n  simulation.on('tick', () => {\n    //update link positions\n    link\n      .attr('x1', (d) => d.source.x)\n      .attr('y1', (d) => d.source.y)\n      .attr('x2', (d) => d.target.x)\n      .attr('y2', (d) => d.target.y);\n\n    // update node positions\n    node.attr('cx', (d) => d.x).attr('cy', (d) => d.y).transition()\n      .duration(2000);\n\n    hostNode.attr('x', (d) => d.x - 8).attr('y', (d) => d.y - 8);\n\n    // update label positions\n    hostLabel.attr('x', d => d.x).attr('y', d => d.y - 16);\n    clusterLabel.attr('x', d => d.x).attr('y', d => d.y - 10);\n  });\n\n  return {\n    destroy: () => {\n      simulation.stop();\n    },\n    nodes: () => {\n      return svg.node();\n    },\n  };\n}\n"],"mappings":"AAAA,OAAO,KAAKA,EAAE,MAAM,IAAI;AAExB,MAAMC,SAAS,GAAG;EAChB,CAAC,EAAE,OAAO;EAAM;EAChB,CAAC,EAAE,OAAO;EAAM;EAChB,CAAC,EAAE,OAAO;EAAM;EAChB,CAAC,EAAE,SAAS;EAAI;EAChB,CAAC,EAAE,SAAS;EAAI;EAChB,CAAC,EAAE,SAAS;EAAI;EAChB,CAAC,EAAE,SAAS;EAAI;EAChB,CAAC,EAAE,SAAS,CAAI;AAClB,CAAC;AAED,SAASC,IAAIA,CAAA,EAAG;EACd,IAAIC,IAAI,GAAGH,EAAE,CAACI,MAAM,CAAC,IAAI,CAAC;IACxBC,UAAU,GAAGF,IAAI,CAACG,IAAI,CAAC,CAAC,CAACC,qBAAqB,CAAC,CAAC;IAChDC,IAAI,GAAGL,IAAI,CAACK,IAAI,CAAC,CAAC;EACpB,OAAOH,UAAU,GAAI,GAAG,GAAG,CAAC,GAAG,CAAE,IAAIG,IAAI,CAACC,MAAM,GAAG,CAAC,EAAE;IACpDD,IAAI,GAAGA,IAAI,CAACE,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;IACxBP,IAAI,CAACK,IAAI,CAACA,IAAI,GAAG,KAAK,CAAC;IACvBH,UAAU,GAAGF,IAAI,CAACG,IAAI,CAAC,CAAC,CAACC,qBAAqB,CAAC,CAAC;EAClD;AACF;AAEA,SAASI,eAAeA,CAACL,IAAI,EAAE;EAAA,IAAAM,IAAA,EAAAC,UAAA;EAC7B,IAAIP,IAAI,CAACQ,IAAI,KAAK,CAAC,IAAIR,IAAI,CAACS,IAAI,KAAK,kBAAkB,EAAE;IACvD,OAAO,IAAIT,IAAI,CAACU,WAAW,KAAKV,IAAI,CAACW,MAAM,KAAKX,IAAI,CAACY,QAAQ,GAAG;EAClE;EACA,OAAO,IAAAN,IAAA,IAAAC,UAAA,GAAGP,IAAI,CAACa,IAAI,cAAAN,UAAA,cAAAA,UAAA,GAAIP,IAAI,CAACc,cAAc,cAAAR,IAAA,cAAAA,IAAA,GAAIN,IAAI,CAACY,QAAQ,GAAGZ,IAAI,CAACe,KAAK,GAAG,IAAIf,IAAI,CAACe,KAAK,GAAG,GAAG,EAAE,EAAE;AACrG;AAEA,OAAO,SAASC,aAAaA,CAC3BC,SAAS,EACTC,SAAS,EACTC,SAAS,EACTC,QAAQ,EACRC,cAAc,CAAE;AAAA,EAChB;EACA,MAAMC,KAAK,GAAGH,SAAS;EACvB,MAAMI,SAAS,GAAGJ,SAAS,CAACK,MAAM,CAACxB,IAAI,IAAIA,IAAI,CAACS,IAAI,KAAK,QAAQ,CAAC;EAClE,MAAMgB,UAAU,GAAGN,SAAS,CACzBK,MAAM,CAACxB,IAAI,IAAIA,IAAI,CAACS,IAAI,KAAK,QAAQ,CAAC,CACtCiB,IAAI,CAAC,CAACC,KAAK,EAAEC,KAAK,KAAKD,KAAK,CAACZ,KAAK,GAAGa,KAAK,CAACb,KAAK,CAAC;EAEpD,MAAMc,KAAK,GAAGX,SAAS;EAEvB,MAAMY,aAAa,GAAGb,SAAS,CAACc,qBAAqB,CAAC,CAAC;EACvDd,SAAS,CAACe,SAAS,GAAG,EAAE;EACxB,IAAIC,KAAK,GAAGH,aAAa,CAACG,KAAK;EAC/B,IAAIC,MAAM,GAAGJ,aAAa,CAACI,MAAM;;EAEjC;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA,MAAMC,OAAO,GAAGC,QAAQ,CAACC,aAAa,CAAC,gBAAgB,CAAC;EACxD,IAAI,CAACF,OAAO,EAAE;IACZ,MAAMG,UAAU,GAAGF,QAAQ,CAACG,aAAa,CAAC,KAAK,CAAC;IAChDD,UAAU,CAACE,KAAK,CAACC,OAAO,GAAG,GAAG;IAC9BH,UAAU,CAACI,EAAE,GAAG,eAAe;IAC/BN,QAAQ,CAACO,IAAI,CAACC,WAAW,CAACN,UAAU,CAAC;EACvC;EACA,MAAMO,gBAAgB,GAAGnD,EAAE,CAACI,MAAM,CAAC,gBAAgB,CAAC;EAEpD,MAAMgD,UAAU,GAAGA,CAACC,YAAY,EAAEC,CAAC,EAAEC,CAAC,EAAEC,CAAC,KAAK;IAC5CL,gBAAgB,CAACM,UAAU,CAAC,CAAC,CAACC,QAAQ,CAAC,GAAG,CAAC,CAACZ,KAAK,CAAC,SAAS,EAAE,GAAG,CAAC;IACjEK,gBAAgB,CAACM,UAAU,CAAC,CAAC,CAACC,QAAQ,CAAC,GAAG,CAAC,CAACZ,KAAK,CAAC,WAAW,EAAE,UAAU,CAAC;IAC1EK,gBAAgB,CACbQ,IAAI,CAACN,YAAY,CAACC,CAAC,CAAC,CAAC,CACrBR,KAAK,CAAC,kBAAkB,EAAE,OAAO,CAAC,CAClCA,KAAK,CAAC,MAAM,EAAE,GAAGS,CAAC,IAAI,CAAC,CACvBT,KAAK,CAAC,KAAK,EAAE,GAAGU,CAAC,GAAG,EAAE,IAAI,CAAC;EAChC,CAAC;EAED,MAAMI,aAAa,GAAGA,CAAA,KAAM;IAC1BT,gBAAgB,CAACM,UAAU,CAAC,CAAC,CAACC,QAAQ,CAAC,GAAG,CAAC,CAACZ,KAAK,CAAC,SAAS,EAAE,CAAC,CAAC;IAC/DK,gBAAgB,CAACM,UAAU,CAAC,CAAC,CAACC,QAAQ,CAAC,GAAG,CAAC,CAACZ,KAAK,CAAC,WAAW,EAAE,UAAU,CAAC;EAC5E,CAAC;EAED,MAAMe,UAAU,GAAG7D,EAAE,CAClB8D,eAAe,CAAClC,KAAK,CAAC,CACtBmC,KAAK,CACJ,MAAM,EACN/D,EAAE,CAACgE,SAAS,CAAC7B,KAAK,CAAC,CAACa,EAAE,CAAEM,CAAC,IAAK,GAAGA,CAAC,CAACW,KAAK,EAAE,CAC5C,CAAC,CACAF,KAAK,CAAC,QAAQ,EAAE/D,EAAE,CAACkE,aAAa,CAAC,CAAC,CAACxC,QAAQ,CAACA,QAAQ,CAAC;EACtD;EAAA,CACCqC,KAAK,CAAC,GAAG,EAAE/D,EAAE,CAACmE,MAAM,CAAC5B,KAAK,GAAG,CAAC,CAAC,CAAC,CAChCwB,KAAK,CAAC,GAAG,EAAE/D,EAAE,CAACoE,MAAM,CAAC5B,MAAM,GAAG,CAAC,CAAC,CAAC;EAEpC,MAAM6B,GAAG,GAAGrE,EAAE,CACXI,MAAM,CAACmB,SAAS,CAAC,CACjB+C,MAAM,CAAC,KAAK,CAAC,CACbC,IAAI,CAAC,QAAQ,EAAE,MAAM,CAAC,CACtBA,IAAI,CAAC,OAAO,EAAE,MAAM,CAAC,CACrBA,IAAI,CAAC,SAAS,EAAE,CAAC,CAAC,EAAE,CAAC,EAAEhC,KAAK,EAAEC,MAAM,CAAC,CAAC,CACtC+B,IAAI,CAAC,UAAU,EAAE,SAAS,CAAC,CAC3BC,IAAI,CACHxE,EAAE,CACCyE,IAAI,CAAC,CAAC,CACNC,EAAE,CAAC,MAAM,EAAE,UAAUC,KAAK,EAAE;IAC3BN,GAAG,CAACE,IAAI,CAAC,WAAW,EAAEI,KAAK,CAACC,SAAS,CAAC;EACxC,CAAC,CAAC,CACDC,eAAe,CAAC,CACf,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,EACZ,CAACtC,KAAK,GAAG,GAAG,EAAEC,MAAM,GAAG,GAAG,CAAC,CAC5B,CACL,CAAC;EAEH,MAAMsC,IAAI,GAAGT,GAAG,CACbC,MAAM,CAAC,GAAG,CAAC,CACXS,SAAS,CAAC,MAAM,CAAC,CACjBC,IAAI,CAAC7C,KAAK,CAAC,CACX8C,KAAK,CAAC,CAAC,CACPX,MAAM,CAAC,MAAM,CAAC,CACdC,IAAI,CAAC,QAAQ,EAAE,MAAM,CAAC,CACtBA,IAAI,CAAC,gBAAgB,EAAE,GAAG,CAAC;EAE9B,MAAMjE,IAAI,GAAG+D,GAAG,CACbC,MAAM,CAAC,GAAG,CAAC,CACXS,SAAS,CAAC,QAAQ,CAAC,CACnBC,IAAI,CAACjD,UAAU,CAAC,CAChBmD,IAAI,CAAC,QAAQ,CAAC,CACdX,IAAI,CAAC,GAAG,EAAGjB,CAAC,IACX6B,IAAI,CAACC,IAAI,CAAC,CAAC,CAAC,GACZD,IAAI,CAACE,GAAG,CAAC,CAAC,EAAEF,IAAI,CAACG,GAAG,CAACC,KAAK,CAACjC,CAAC,CAACjC,KAAK,CAAC,GAAG,CAAC,GAAGiC,CAAC,CAACjC,KAAK,GAAG,EAAE,CAAC,CACzD,CAAC,CACAkD,IAAI,CAAC,MAAM,EAAGjB,CAAC,IAAKrD,SAAS,CAACqD,CAAC,CAACkC,KAAK,CAAC,CAAC,CACvCd,EAAE,CAAC,OAAO,EAAE,CAACC,KAAK,EAAErB,CAAC,KAAK;IACzB,IAAI,CAAC3B,cAAc,CAAC8D,QAAQ,CAACnC,CAAC,CAACvC,IAAI,CAAC,EAClCqC,UAAU,CAAEsC,CAAC;MAAA,IAAAC,iBAAA,EAAAC,OAAA;MAAA,OAAKF,CAAC,CAAC3E,IAAI,CAAC0E,QAAQ,CAAC,SAAS,CAAC,IAAAE,iBAAA,GAAID,CAAC,CAACtE,cAAc,cAAAuE,iBAAA,cAAAA,iBAAA,GAAID,CAAC,CAACxE,QAAQ,GAAI,IAAA0E,OAAA,GAAGF,CAAC,CAACvE,IAAI,cAAAyE,OAAA,cAAAA,OAAA,GAAIF,CAAC,CAACtE,cAAc,KAAKsE,CAAC,CAACrE,KAAK,GAAG;IAAA,GAAEiC,CAAC,EAAEqB,KAAK,CAACkB,KAAK,EAAElB,KAAK,CAACmB,KAAK,CAAC;EAChK,CAAC,CAAC,CACDpB,EAAE,CAAC,UAAU,EAAE,MAAM;IACpBd,aAAa,CAAC,CAAC;EACjB,CAAC,CAAC;EACJ;;EAEA,MAAMmC,QAAQ,GAAG1B,GAAG,CACjBC,MAAM,CAAC,GAAG,CAAC,CACXC,IAAI,CAAC,QAAQ,EAAE,SAAS,CAAC,CACzBA,IAAI,CAAC,cAAc,EAAE,CAAC,CAAC,CACvBQ,SAAS,CAAC,MAAM,CAAC,CACjBC,IAAI,CAACnD,SAAS,CAAC,CACfqD,IAAI,CAAC,MAAM,CAAC,CACZX,IAAI,CAAC,OAAO,EAAE,EAAE,CAAC,CACjBA,IAAI,CAAC,QAAQ,EAAE,EAAE,CAAC,CAClBA,IAAI,CAAC,MAAM,EAAGjB,CAAC,IAAKrD,SAAS,CAACqD,CAAC,CAACkC,KAAK,CAAC,CAAC,CACvCd,EAAE,CAAC,UAAU,EAAE,CAACC,KAAK,EAAErB,CAAC,KAAK;IAC5BqB,KAAK,CAACqB,cAAc,CAAC,CAAC;IACtBC,OAAO,CAACX,GAAG,CAAChC,CAAC,CAACrC,MAAM,CAAC;IACrBiF,MAAM,CAACC,QAAQ,GAAI,kBAAkB7C,CAAC,CAACrC,MAAM,EAAG;EAClD,CAAC,CAAC;EAEJ,MAAMmF,SAAS,GAAG/B,GAAG,CAClBC,MAAM,CAAC,GAAG,CAAC,CACXC,IAAI,CAAC,OAAO,EAAE,QAAQ,CAAC,CACvBQ,SAAS,CAAC,MAAM,CAAC,CACjBC,IAAI,CAACnD,SAAS,CAACC,MAAM,CAACwB,CAAC,IAAI3B,cAAc,CAAC8D,QAAQ,CAACnC,CAAC,CAACvC,IAAI,CAAC,CAAC,CAAC,CAAC;EAAA,CAC7DkE,KAAK,CAAC,CAAC,CACPX,MAAM,CAAC,MAAM,CAAC,CACd9D,IAAI,CAAE8C,CAAC,IAAK,IAAIA,CAAC,CAACtC,WAAW,GAAG,GAAG,GAAG,GAAGsC,CAAC,CAACrC,MAAM,CAACoF,WAAW,CAAC,CAAC;EAChE;EAAA,CACC9B,IAAI,CAAC,QAAQ,EAAE,MAAM,CAAC,CACtBA,IAAI,CAAC,cAAc,EAAE,CAAC,CAAC,CACvBA,IAAI,CAAC,MAAM,EAAE,SAAS,CAAC,CACvBA,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,CACvBA,IAAI,CAAC,aAAa,EAAE,KAAK,CAAC,CAC1BA,IAAI,CAAC,aAAa,EAAE,QAAQ,CAAC,CAC7BA,IAAI,CAAC,mBAAmB,EAAE,SAAS,CAAC;EAEvC,MAAM+B,YAAY,GAAGjC,GAAG,CAACC,MAAM,CAAC,GAAG,CAAC,CACjCC,IAAI,CAAC,OAAO,EAAE,QAAQ,CAAC,CACvBQ,SAAS,CAAC,MAAM,CAAC,CACjBC,IAAI,CAACjD,UAAU,CAACD,MAAM,CAACwB,CAAC,IAAI3B,cAAc,CAAC8D,QAAQ,CAACnC,CAAC,CAACvC,IAAI,CAAC,CAAC,CAAC,CAAC;EAAA,CAC9DkE,KAAK,CAAC,CAAC,CACPX,MAAM,CAAC,MAAM,CAAC,CACd9D,IAAI,CAAE8C,CAAC,IAAK3C,eAAe,CAAC2C,CAAC,CAAC,CAAC,CAC/BiB,IAAI,CAAC,QAAQ,EAAE,SAAS,CAAC,CACzBA,IAAI,CAAC,cAAc,EAAE,CAAC,CAAC,CACvBA,IAAI,CAAC,MAAM,EAAE,MAAM,CAAC,CACpBA,IAAI,CAAC,aAAa,EAAE,QAAQ,CAAC,CAC7BA,IAAI,CAAC,aAAa,EAAE,QAAQ,CAAC,CAC7BA,IAAI,CAAC,mBAAmB,EAAE,SAAS,CAAC;EAEvCV,UAAU,CAACa,EAAE,CAAC,MAAM,EAAE,MAAM;IAC1B;IACAI,IAAI,CACDP,IAAI,CAAC,IAAI,EAAGjB,CAAC,IAAKA,CAAC,CAACiD,MAAM,CAAChD,CAAC,CAAC,CAC7BgB,IAAI,CAAC,IAAI,EAAGjB,CAAC,IAAKA,CAAC,CAACiD,MAAM,CAAC/C,CAAC,CAAC,CAC7Be,IAAI,CAAC,IAAI,EAAGjB,CAAC,IAAKA,CAAC,CAACkD,MAAM,CAACjD,CAAC,CAAC,CAC7BgB,IAAI,CAAC,IAAI,EAAGjB,CAAC,IAAKA,CAAC,CAACkD,MAAM,CAAChD,CAAC,CAAC;;IAEhC;IACAlD,IAAI,CAACiE,IAAI,CAAC,IAAI,EAAGjB,CAAC,IAAKA,CAAC,CAACC,CAAC,CAAC,CAACgB,IAAI,CAAC,IAAI,EAAGjB,CAAC,IAAKA,CAAC,CAACE,CAAC,CAAC,CAACC,UAAU,CAAC,CAAC,CAC5DC,QAAQ,CAAC,IAAI,CAAC;IAEjBqC,QAAQ,CAACxB,IAAI,CAAC,GAAG,EAAGjB,CAAC,IAAKA,CAAC,CAACC,CAAC,GAAG,CAAC,CAAC,CAACgB,IAAI,CAAC,GAAG,EAAGjB,CAAC,IAAKA,CAAC,CAACE,CAAC,GAAG,CAAC,CAAC;;IAE5D;IACA4C,SAAS,CAAC7B,IAAI,CAAC,GAAG,EAAEjB,CAAC,IAAIA,CAAC,CAACC,CAAC,CAAC,CAACgB,IAAI,CAAC,GAAG,EAAEjB,CAAC,IAAIA,CAAC,CAACE,CAAC,GAAG,EAAE,CAAC;IACtD8C,YAAY,CAAC/B,IAAI,CAAC,GAAG,EAAEjB,CAAC,IAAIA,CAAC,CAACC,CAAC,CAAC,CAACgB,IAAI,CAAC,GAAG,EAAEjB,CAAC,IAAIA,CAAC,CAACE,CAAC,GAAG,EAAE,CAAC;EAC3D,CAAC,CAAC;EAEF,OAAO;IACLiD,OAAO,EAAEA,CAAA,KAAM;MACb5C,UAAU,CAAC6C,IAAI,CAAC,CAAC;IACnB,CAAC;IACD9E,KAAK,EAAEA,CAAA,KAAM;MACX,OAAOyC,GAAG,CAAC/D,IAAI,CAAC,CAAC;IACnB;EACF,CAAC;AACH","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}